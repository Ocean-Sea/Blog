# 介绍

- `Shell`相当于内核`kernel`外的一层外壳，作为用户接口。
- `Shell`是一个命令解释器，它为用户提供了一个向`linux`内核发送请求以便运行的程序的界面系统程序。
- 用户可以用`Shell`来启动、挂起、停止或者编写一些程序。
- `Shell` 还是一个功能相当强大的语言编辑器，易编写，易调试，灵活性较强。
- `Shell` 是解释执行的脚本语言， 在`Shell` 中可以直接调用`Linux`系统的命令。
- 在每一个`shell`下可以再打开一个`shell`，新打开的`shell`可以称为子`shell`，每一个`shell`之间
是相互独立的。
- 可以使用`pstree`命令查看当前`shell`下的子`shell`个数。

**一般来说，操作系统的接口分为两类：**
- CLI：`command line interface`命令行接口
  - 常见的有：`sh  csh  ksh  zsh bash tcsh`。

- GUI：`graphical user interface` 图形化用户接口
  - 常见的有：`Gnome  KDE  Xfce`。

## 查看`shell`的种类

`Linux`中默认的`shell`是`/bin/bash`。

```sh{1}
root@iZm5eeens8iab3xz6f0rfiZ ~]# cat /etc/shells
/bin/sh
/bin/bas
/usr/bin/sh
/usr/bin/bash
```

|   命令     | 作用 |       
| --------- | --- | 
| man bash     | 查看bash的命令帮助文档 。 |    
| info shell   |  查看bash的文档。  |   
| help |  命令显示bash支持的命令。 | 
| help cd |  如果想看某个命令的帮助，可以 `help` 命令。  | 

## echo
- 输出命令
- `--e` 支持反斜线控制字符转换


|   控制字符     | 作用 |       
| --------- | --- | 
| \a | 输出警告。 |    
| \b |  退格键，也就是向左删除键。  |   
| \n |  换行符 | 
| \r |  回车键  | 
| \t |  制表符，也就是`Tab`键。  | 
| \v |  垂直制表符。  | 
| \onnn |  按照八进制ASCII码表输出字符。其中0为数字零， `nnn`是三位八进制数。| 
| \xhh |  按照十六进制ASCII码表输出字符。其中`hh`是两位16进制数。 | 

**示例**
```sh{1}
[root@iZm5eeens8iab3xz6f0rfiZ ~]# echo -e "11\r\n22\r\n33"
11
22
33
```
**输出各种颜色**
```sh	
echo -e "\e[43;35m Linux\e[0m hello word"
```
字体颜色

- #30:黑 
- #31:红 
- #32:绿 
- #33:黄 
- #34:蓝色 
- #35:紫色 
- #36:深绿 
- #37:白色


背景颜色

- #40:黑 
- #41:深红 
- #42:绿 
- #43:黄色 
- #44:蓝色 
- #45:紫色 
- #46:深绿 
- #47:白色

## 编写执行`shell` 

在文件`hello.sh`输入如下:
```sh
#!/bin/bash
echo -e "\e[43;35m Linux\e[0m hello word"
```
**执行`shell.sh`有如下几种方式:**

1. 通过`sh` + 文件名

```sh{1}
[root@iZm5eeens8iab3xz6f0rfiZ ~]# sh  shell.sh 
Linux hello word
```

2. 通过`bash` + 文件名

```sh{1}
[root@iZm5eeens8iab3xz6f0rfiZ ~]# bash shell.sh 
Linux hello word
```
3. 直接输入`./文件名称`，但是出现 `Permission denied` , 需要将文件变为可执行文件。

```sh{3}
[root@iZm5eeens8iab3xz6f0rfiZ ~]# ./shell.sh
 -bash: ./shell.sh: Permission denied
[root@iZm5eeens8iab3xz6f0rfiZ ~]# chmod 755  shell.sh 
[root@iZm5eeens8iab3xz6f0rfiZ ~]# ./shell.sh
Linux hello word
```

## 命令的生效顺序

- 绝对路径或者相对路径来执行。

```sh
//执行当前目录下的shell.sh
[root@iZm5eeens8iab3xz6f0rfiZ ~]# ./shell.sh
```
- 别名。 例如 `ls`。

- `bash`内部命令。 例如 `cd`。

- 按照 `$PATH` 环境变量定义的目录查找顺序找到的第一个命令。
```sh
[root@iZm5eeens8iab3xz6f0rfiZ ~]# echo $PATH
/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin
```

## 命令的快捷键

|   命令     | 作用 |       
| --------- | --- | 
| ctrl + c |  强制终止命令。 |    
| ctrl + i |  清屏。  |   
| ctrl + a |  光标移动到命令行首。 | 
| ctrl + u |  把光标所在的位置删除到行首。 | 
| ctrl + e |  光标移动到命令行尾。  | 
| ctrl + z |  把命令放入后台。  | 
| ctrl + r |  在历史命令搜索。  |



## 输出重定向

### 标准输入输出
|  设备 | 设备文件名 | 文件描述符 | 类型 |  
| --------- | --- |  --------- | --- | 
| 键盘     | /dev/stdin  |  0  | 标准输入 |
| 显示器   | /dev/stdout |  1  | 标准输出  |
| 显示器   | /dev/stderr |  2  | 标准错误输出|

|  类型 | <div style="width: 180px"></div> | 作用 | 案例 |
| --------- | --- |  --------- | --- |  --------- | 
| 标准输出重定向   | 命令 > 文件 |  以覆盖的方式，把命令的正确输出输出到文件或者设备中  | 
| 标准输出重定向   | 命令 >>文件|  以追加的方式，把命令的正确输出输出到文件或者设备中  | 
| 错误输出重定向   | 命令 > 文件 |  以覆盖的方式，把命令的错误输出输出到文件或者设备中   | 
| 错误输出重定向   | 命令 >>文件|  以追加的方式，把命令的错误输出输出到文件或者设备中  | 
| 正确输出和错误输出同时保存  | 命令 > 文件 2>&1 |  以覆盖的方式，把正确输出和错误输出保存到同一个文件中  | 
| 正确输出和错误输出同时保存  | 命令 > 文件 2>>&1 |  以追加的方式，把正确输出和错误输出保存到同一个文件中 | 
| 正确输出和错误输出同时保存  | 命令 &> 文件|  以覆盖的方式，把命令的错误输出输出到文件或者设备中  | 
| 正确输出和错误输出同时保存  | 命令 &>> 文件|  以追加的方式，把命令的错误输出输出到文件或者设备中  | 
| 正确输出和错误输出同时保存  | 命令 >>文件1 2>文件2|  以覆盖的方式，正确的输出追加到文件1中，把错误的输出追加到文件2中 | 


### 输入重定向

- 命令 `<` 文件把文件作为命令的输出入。
- 命令 `<<` 标识符， 标识符把标识符之间的内容作为命令输出。


## 管道符

### 多命令顺序执行

|  多命令执行符 | <div style="width: 150px">格式</div>  | 作用 |   <div style="width: 150px">案例</div> |
| --------- | --- |  --------- | --- |
| `;`    | 命令1 `;`  命令2  |  多个命令执行，命令之间灭有任何逻辑关系 |  echo 1 ; echo 2|
| `&&`   | 命令1 `&&` 命令2  |  逻辑与。当命令1正确执行，则命令2才会执行。当命令1执行不正确，则命令2不会执行。 | echo 1 && echo 2|
| `||`   | 命令1 `||` 命令2  |  逻辑或。当命令1执行不正确，则命令2才会执行。当命令1执行正确，则命令2才会执行。 | echo 1 || echo 2|

### 管道符号
- 命令1的正确输出会作为命令2的操作对象。
- 命令1 | 命令2

```sh
[root@iZm5eeens8iab3xz6f0rfiZ ~]# ls /etc | more
```

### 通配符
匹配文件名和目录名

|  通配符 | 作用 | 
| --------- | --- |  
| ？  | 匹配一个任意字符。|  
| *   | 匹配0个或任意字符，也就是可以匹配任意内容。|  
| [ ] | 匹配中括号中的任意一个字符。|  
| [-] | 匹配中括号任意一个字符，`-`代表范围。|  
| [^] | 匹配不是中括号的一个字符。 |  

### 其他字符

|  符号 | 作用 | 
| ---  |  --- |  
| `''` | 单引号。 在单引号所有的特殊符号。如何`$` 和 ` 都有特殊含义。|  
| `""` | 单引号。 在双引号里特殊符号都没有特殊含义，但是`$` ` \ 例外，拥有调用变量值， 引用含义和转义的含义。|  
| `` | 反引号，扩起来的是系统命令。|  
| `$()` | 和反引号 |  
| `#` | 在`shell`脚本中，`#`开头的行表注释。 |  
| `$` | 用于调用变量的值。 |  
| `\` | 转义符号。 |  




